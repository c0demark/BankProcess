<!DOCTYPE html>

<html lang="en">
<!-- To declare your language - read more here: https://www.w3.org/International/questions/qa-html-language-declarations -->
<head>
<title>INDGO BANK</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link href="layout/customCSS.css" rel="stylesheet" type="text/css" media="all">
<link rel="stylesheet" href="layout/bootstrap.min.css">

<script type="text/javascript">
// Add active class to the current button (highlight it)
 var username;
 var password;
 var confirmPassword;

   function checkValidation(e){
	   username=  document.getElementsByName("userid")[0].value;
	   password = document.getElementsByName("pswrd")[0].value;
	   confirmPassword = document.getElementsByName("confirmpass")[0].value;
       var resultValidator =true
      
      if(validationRes()==true){
    	if (confirm("Proceed for password change")) {
    	document.getElementById('err').innerText="";
        var xhttp = new XMLHttpRequest();
        var params = 'username='+username+'&amp;password='+password
        xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
             document.getElementById("succ").innerHTML = this.responseText;
                }
               };
       xhttp.open("POST", "user_forget.py", true);
       xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
       xhttp.send(params);
       }
      }	
      e.preventDefault();
	  } 
  function validationRes(){
  
  
   var msg;
   if (username==null||password==null||confirmPassword==null||username.trim()=="" || confirmPassword.trim()==""||password.trim()==""){ 
       msg= "Please Fill All the Details !..";
       document.getElementById('err').innerText=msg; 
	   return false;
       }
    else if(confirmPassword.trim()!= password.trim()){
	    msg= "New Password and Confirm password not Matching";
      document.getElementById('err').innerText=msg; 
	   return false;
	} 
    return true;  
   
   }
  
</script>


</head>

<body id='bg'>

<ul id="nav-bar">
  <li><a class="nav-bar-list" href="index.html">Login</a></li>
  <li><a class="nav-bar-list" href="register.html">Register</a></li>
  <li><a class="nav-bar-list" href="#contact">Contact</a></li>
</ul>

<div class='table'>
  
    <div class='cell'>
            <h1 align="center" style="color:#641E16;">..Password Change...!</h1>
    <p style="color:#f442b3" id="succ"></p>
      <form name="passwordChange" method="post" >
		    <span style="color:blue" id="err"></span><br>
            <label>Username <i class="glyphicon glyphicon-user" style="font-size:24px;"></i>:</label>
            <input type="text" name="userid" placeholder="Email ID" pattern="/^([w-.]+@([w-]+.)+[w-]{2,4})?$/" title="xyz@something.com" required />
            <br />
            <label>New-Password <i class="glyphicon glyphicon-lock" style="font-size:24px;"></i>:</label>
            <input type="password" name="pswrd"  pattern="[M]\d{7}" title="Starting with M followed by 7 digit" required />
            <br /><br/>
             <label>Ret-Password <i class="glyphicon glyphicon-info-sign" style="font-size:24px;"></i>:</label>
            <input type="password" name="confirmpass" width="48" height="48" pattern="[M]\d{7}"  required />
            <br /><br/>
          
			<button type="submit" value="Change Password" class="btn-submit" onclick ="checkValidation(event)" >Update</button>
            <button type="reset" value="cancel" class="btn-reset">Cancel</button>
        </form>
    </div>
</div>

</body>

</html>